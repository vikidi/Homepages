{"version":3,"sources":["../node_modules/three/examples/jsm/math/Capsule.js","../node_modules/three/examples/jsm/math/Octree.js","../node_modules/three/examples/jsm/loaders/GLTFLoader.js","../node_modules/three/examples/jsm/loaders/DRACOLoader.js","../node_modules/three/examples/jsm/libs/meshopt_decoder.module.js","../node_modules/@react-three/drei/core/useGLTF.js","../node_modules/three/examples/jsm/controls/PointerLockControls.js","../node_modules/@react-three/drei/core/PointerLockControls.js"],"names":["Capsule","_v1","Vector3","_v2","_v3","start","end","radius","this","undefined","Object","assign","prototype","clone","set","copy","capsule","getCenter","target","add","multiplyScalar","translate","v","checkAABBAxis","p1x","p1y","p2x","p2y","minx","maxx","miny","maxy","intersectsBox","box","x","y","min","max","z","lineLineMinimumPoints","line1","line2","t1","t2","r","sub","s","w","a","dot","b","c","d","e","divisor","Math","abs","d1","d2","Octree","_plane","Plane","_line1","Line3","_line2","_sphere","Sphere","_capsule","triangles","subTrees","addTriangle","triangle","bounds","Box3","push","calcBox","split","level","halfsize","multiply","pop","i","length","intersectsTriangle","len","build","getRayTriangles","ray","subTree","j","indexOf","triangleCapsuleIntersect","point1","point2","getPlane","distanceToPoint","delta","intersectPoint","lerp","containsPoint","normal","point","depth","r2","lines","distanceToSquared","normalize","distanceTo","triangleSphereIntersect","sphere","intersectsPlane","distanceToSphere","plainPoint","projectPoint","center","closestPointToPoint","sqrt","getSphereTriangles","getCapsuleTriangles","sphereIntersect","result","hit","collisionVector","capsuleIntersect","rayIntersect","direction","position","distance","intersectTriangle","newdistance","origin","fromGraphNode","group","traverse","obj","type","updateMatrix","updateWorldMatrix","geometry","isTemp","index","toNonIndexed","positions","attributes","array","transform","matrixWorld","v1","v2","v3","applyMatrix4","Triangle","dispose","GLTFLoader","manager","Loader","call","dracoLoader","ddsLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsTransmissionExtension","GLTFLightsExtension","GLTFMeshoptCompression","GLTFRegistry","objects","get","key","object","remove","removeAll","create","constructor","load","url","onLoad","onProgress","onError","resourcePath","scope","path","LoaderUtils","extractUrlBase","itemStart","_onError","console","error","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","data","parse","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","setMeshoptDecoder","callback","unregister","splice","content","extensions","plugins","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","version","Error","GLTFParser","crossOrigin","fileLoader","plugin","name","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","warn","setExtensions","setPlugins","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","cache","refs","uses","isSupported","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightNode","lightDef","lights","color","Color","fromArray","range","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","PI","angle","penumbra","decay","intensity","createUniqueName","Promise","resolve","createNodeAttachment","self","then","_getNodeRef","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","pending","opacity","metallicRoughness","pbrMetallicRoughness","Array","isArray","baseColorFactor","baseColorTexture","assignTexture","all","materialIndex","materials","MeshPhysicalMaterial","extendMaterialParams","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","Vector2","transmissionFactor","transmission","transmissionTexture","loadTexture","textureIndex","textureDef","textures","source","images","options","loadTextureImage","uri","getHandler","textureLoader","detectSupport","image","Image","src","onload","onerror","height","loadBufferView","bufferView","bufferViews","extensionDef","buffer","getDependency","decoder","supported","ready","res","byteOffset","byteLength","count","stride","byteStride","ArrayBuffer","decodeGltfBuffer","mode","filter","BINARY_EXTENSION_CHUNK_TYPES","body","headerView","DataView","header","magic","slice","getUint32","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","GLTFMeshStandardSGMaterial","params","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","specular","value","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","replace","defineProperties","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","material","fog","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","attribute","extendTexture","texture","offset","rotation","repeat","texCoord","needsUpdate","copySampleValue_","values","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t","stride2","stride3","td","p","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","Uint32Array","5126","Float32Array","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","resolveURL","test","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","dracoExtension","indices","createAttributesKey","attributesKey","keys","sort","associations","Map","primitiveCache","meshCache","cameraCache","lightCache","nodeNamesUsed","createImageBitmap","navigator","userAgent","ImageBitmapLoader","TextureLoader","setCrossOrigin","addPrimitiveAttributes","assignAttributeAccessor","accessorIndex","accessor","setAttribute","gltfAttributeName","setIndex","targets","maxDisplacement","vector","setX","setY","setZ","expandByVector","boundingBox","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","morphPositions","morphNormals","morphAttributes","morphTargetsRelative","addMorphTargets","toTrianglesDrawMode","drawMode","getIndex","getAttribute","numberOfTriangles","newIndices","TriangleFanDrawMode","getX","newGeometry","_invokeAll","ext","getDependencies","dependencies","scene","scenes","animations","cameras","catch","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","camera","ref","_invokeOne","func","unshift","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","reject","bufferViewDef","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setW","textureExtensions","URL","webkitURL","sourceURI","isObjectURL","hasAlpha","mimeType","colorType","getUint8","blob","Blob","createObjectURL","isImageBitmapLoader","imageBitmap","CanvasTexture","revokeObjectURL","flipY","format","RGBFormat","sampler","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","gltfReference","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","flatShading","morphTargets","uv2","uv","materialType","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","side","DoubleSide","alphaMode","transparent","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","sRGBEncoding","originalName","sanitizedName","PropertyBinding","sanitizeNodeName","loadGeometries","primitives","createDracoPrimitive","geometryPromise","cached","promise","BufferGeometry","meshIndex","depthTest","FrontSide","results","geometries","SkinnedMesh","Mesh","skinWeight","normalizeSkinWeights","TriangleStripDrawMode","LineSegments","Line","LineLoop","Points","Group","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","id","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","matrixAutoUpdate","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","isMesh","outputArray","scaled","jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","nodeName","o","forEach","Bone","Object3D","matrix","Matrix4","quaternion","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","bind","Skeleton","children","child","sceneIndex","sceneDef","nodeIds","DRACOLoader","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","defaultAttributeTypes","setDecoderPath","setDecoderConfig","config","setWorkerLimit","setVerbosity","setDrawMode","setSkipDequantization","taskConfig","attributeIDs","attributeTypes","useUniqueIDs","decodeGeometry","worker","taskKey","stringify","taskCache","has","cachedTask","taskID","taskCost","geometryPending","_getWorker","_worker","_callbacks","postMessage","message","_createGeometry","_releaseTask","geometryData","_loadLibrary","responseType","_initDecoder","useJS","WebAssembly","librariesPending","libraries","jsContent","wasmBinary","fn","DRACOWorker","toString","substring","lastIndexOf","Worker","_taskCosts","_taskLoad","onmessage","debug","log","terminate","decodeAttribute","draco","dracoGeometry","attributeType","numComponents","num_components","numValues","num_points","dataType","DT_FLOAT32","DT_INT8","DT_INT16","Int32Array","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","getDracoDataType","ptr","_malloc","GetAttributeDataArrayForAllPoints","HEAPF32","_free","onModuleLoaded","DracoDecoderModule","module","Decoder","decoderBuffer","DecoderBuffer","Init","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","DecodeBufferToMesh","POINT_CLOUD","PointCloud","DecodeBufferToPointCloud","ok","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","numIndices","num_faces","GetTrianglesUInt32Array","decodeIndex","destroy","attr","WeakMap","releaseDecoderModule","getDecoderModule","MeshoptDecoder","detector","wasmpack","instance","wasm","validate","instantiate","ch","charCodeAt","write","unpack","exports","__wasm_call_ctors","decode","fun","size","sbrk","count4","tp","sp","heap","memory","subarray","filters","0","1","2","3","NONE","OCTAHEDRAL","QUATERNION","EXPONENTIAL","decoders","TRIANGLES","INDICES","decodeVertexBuffer","meshopt_decodeVertexBuffer","decodeIndexBuffer","meshopt_decodeIndexBuffer","decodeIndexSequence","meshopt_decodeIndexSequence","useDraco","useMeshopt","useGLTF","useMeshOpt","useLoader","PointerLockControls","domElement","document","isLocked","minPolarAngle","maxPolarAngle","changeEvent","lockEvent","unlockEvent","euler","Euler","PI_2","vec","onMouseMove","event","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","setFromEuler","dispatchEvent","onPointerlockChange","ownerDocument","pointerLockElement","onPointerlockError","connect","addEventListener","disconnect","removeEventListener","getObject","getDirection","applyQuaternion","moveForward","setFromMatrixColumn","crossVectors","up","addScaledVector","moveRight","lock","requestPointerLock","unlock","exitPointerLock","EventDispatcher","forwardRef","_ref","selector","props","_objectWithoutPropertiesLoose","useThree","gl","invalidate","controls","useEffectfulState","PointerLockControls$1","useEffect","handler","element","querySelector","createElement","_extends"],"mappings":"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","file":"static/js/7.d5843174.chunk.js","sourcesContent":["import {\n\tVector3\n} from \"../../../build/three.module.js\";\n\n\nvar Capsule = ( function () {\n\n\tvar _v1 = new Vector3();\n\tvar _v2 = new Vector3();\n\tvar _v3 = new Vector3();\n\n\tvar EPS = 1e-10;\n\n\tfunction Capsule( start, end, radius ) {\n\n\t\tthis.start = start == undefined ? new Vector3( 0, 0, 0 ) : start;\n\t\tthis.end = end == undefined ? new Vector3( 0, 1, 0 ) : end;\n\t\tthis.radius = radius == undefined ? 1 : radius;\n\n\t}\n\n\tObject.assign( Capsule.prototype, {\n\n\t\tclone: function () {\n\n\t\t\treturn new Capsule( this.start.clone(), this.end.clone(), this.radius );\n\n\t\t},\n\n\t\tset: function ( start, end, radius ) {\n\n\t\t\tthis.start.copy( start );\n\t\t\tthis.end.copy( end );\n\t\t\tthis.radius = radius;\n\n\t\t},\n\n\t\tcopy: function ( capsule ) {\n\n\t\t\tthis.start.copy( capsule.start );\n\t\t\tthis.end.copy( capsule.end );\n\t\t\tthis.radius = capsule.radius;\n\n\t\t},\n\n\t\tgetCenter: function ( target ) {\n\n\t\t\treturn target.copy( this.end ).add( this.start ).multiplyScalar( 0.5 );\n\n\t\t},\n\n\t\ttranslate: function ( v ) {\n\n\t\t\tthis.start.add( v );\n\t\t\tthis.end.add( v );\n\n\t\t},\n\n\t\tcheckAABBAxis: function ( p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius ) {\n\n\t\t\treturn (\n\t\t\t\t( minx - p1x < radius || minx - p2x < radius ) &&\n\t\t\t\t( p1x - maxx < radius || p2x - maxx < radius ) &&\n\t\t\t\t( miny - p1y < radius || miny - p2y < radius ) &&\n\t\t\t\t( p1y - maxy < radius || p2y - maxy < radius )\n\t\t\t);\n\n\t\t},\n\n\t\tintersectsBox: function ( box ) {\n\n\t\t\treturn (\n\t\t\t\tthis.checkAABBAxis(\n\t\t\t\t\tthis.start.x, this.start.y, this.end.x, this.end.y,\n\t\t\t\t\tbox.min.x, box.max.x, box.min.y, box.max.y,\n\t\t\t\t\tthis.radius ) &&\n\t\t\t\tthis.checkAABBAxis(\n\t\t\t\t\tthis.start.x, this.start.z, this.end.x, this.end.z,\n\t\t\t\t\tbox.min.x, box.max.x, box.min.z, box.max.z,\n\t\t\t\t\tthis.radius ) &&\n\t\t\t\tthis.checkAABBAxis(\n\t\t\t\t\tthis.start.y, this.start.z, this.end.y, this.end.z,\n\t\t\t\t\tbox.min.y, box.max.y, box.min.z, box.max.z,\n\t\t\t\t\tthis.radius )\n\t\t\t);\n\n\t\t},\n\n\t\tlineLineMinimumPoints: function ( line1, line2 ) {\n\n\t\t\tvar r = _v1.copy( line1.end ).sub( line1.start );\n\t\t\tvar s = _v2.copy( line2.end ).sub( line2.start );\n\t\t\tvar w = _v3.copy( line2.start ).sub( line1.start );\n\n\t\t\tvar a = r.dot( s ),\n\t\t\t\tb = r.dot( r ),\n\t\t\t\tc = s.dot( s ),\n\t\t\t\td = s.dot( w ),\n\t\t\t\te = r.dot( w );\n\n\t\t\tvar t1, t2, divisor = b * c - a * a;\n\n\t\t\tif ( Math.abs( divisor ) < EPS ) {\n\n\t\t\t\tvar d1 = - d / c;\n\t\t\t\tvar d2 = ( a - d ) / c;\n\n\t\t\t\tif ( Math.abs( d1 - 0.5 ) < Math.abs( d2 - 0.5 ) ) {\n\n\t\t\t\t\tt1 = 0;\n\t\t\t\t\tt2 = d1;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tt1 = 1;\n\t\t\t\t\tt2 = d2;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tt1 = ( d * a + e * c ) / divisor;\n\t\t\t\tt2 = ( t1 * a - d ) / c;\n\n\t\t\t}\n\n\t\t\tt2 = Math.max( 0, Math.min( 1, t2 ) );\n\t\t\tt1 = Math.max( 0, Math.min( 1, t1 ) );\n\n\t\t\tvar point1 = r.multiplyScalar( t1 ).add( line1.start );\n\t\t\tvar point2 = s.multiplyScalar( t2 ).add( line2.start );\n\n\t\t\treturn [ point1, point2 ];\n\n\t\t}\n\n\t} );\n\n\treturn Capsule;\n\n} )();\n\nexport { Capsule };\n","import {\n\tBox3,\n\tLine3,\n\tPlane,\n\tSphere,\n\tTriangle,\n\tVector3\n} from \"../../../build/three.module.js\";\nimport { Capsule } from \"../math/Capsule.js\";\n\n\nvar Octree = ( function () {\n\n\tvar _v1 = new Vector3();\n\tvar _v2 = new Vector3();\n\tvar _plane = new Plane();\n\tvar _line1 = new Line3();\n\tvar _line2 = new Line3();\n\tvar _sphere = new Sphere();\n\tvar _capsule = new Capsule();\n\n\tfunction Octree( box ) {\n\n\t\tthis.triangles = [];\n\t\tthis.box = box;\n\t\tthis.subTrees = [];\n\n\t}\n\n\tObject.assign( Octree.prototype, {\n\n\t\taddTriangle: function ( triangle ) {\n\n\t\t\tif ( ! this.bounds ) this.bounds = new Box3();\n\n\t\t\tthis.bounds.min.x = Math.min( this.bounds.min.x, triangle.a.x, triangle.b.x, triangle.c.x );\n\t\t\tthis.bounds.min.y = Math.min( this.bounds.min.y, triangle.a.y, triangle.b.y, triangle.c.y );\n\t\t\tthis.bounds.min.z = Math.min( this.bounds.min.z, triangle.a.z, triangle.b.z, triangle.c.z );\n\t\t\tthis.bounds.max.x = Math.max( this.bounds.max.x, triangle.a.x, triangle.b.x, triangle.c.x );\n\t\t\tthis.bounds.max.y = Math.max( this.bounds.max.y, triangle.a.y, triangle.b.y, triangle.c.y );\n\t\t\tthis.bounds.max.z = Math.max( this.bounds.max.z, triangle.a.z, triangle.b.z, triangle.c.z );\n\n\t\t\tthis.triangles.push( triangle );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tcalcBox: function () {\n\n\t\t\tthis.box = this.bounds.clone();\n\n\t\t\t// offset small ammount to account for regular grid\n\t\t\tthis.box.min.x -= 0.01;\n\t\t\tthis.box.min.y -= 0.01;\n\t\t\tthis.box.min.z -= 0.01;\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsplit: function ( level ) {\n\n\t\t\tif ( ! this.box ) return;\n\n\t\t\tvar subTrees = [],\n\t\t\t\thalfsize = _v2.copy( this.box.max ).sub( this.box.min ).multiplyScalar( 0.5 ),\n\t\t\t\tbox, v, triangle;\n\n\t\t\tfor ( var x = 0; x < 2; x ++ ) {\n\n\t\t\t\tfor ( var y = 0; y < 2; y ++ ) {\n\n\t\t\t\t\tfor ( var z = 0; z < 2; z ++ ) {\n\n\t\t\t\t\t\tbox = new Box3();\n\t\t\t\t\t\tv = _v1.set( x, y, z );\n\n\t\t\t\t\t\tbox.min.copy( this.box.min ).add( v.multiply( halfsize ) );\n\t\t\t\t\t\tbox.max.copy( box.min ).add( halfsize );\n\n\t\t\t\t\t\tsubTrees.push( new Octree( box ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\twhile ( triangle = this.triangles.pop() ) {\n\n\t\t\t\tfor ( var i = 0; i < subTrees.length; i ++ ) {\n\n\t\t\t\t\tif ( subTrees[ i ].box.intersectsTriangle( triangle ) ) {\n\n\t\t\t\t\t\tsubTrees[ i ].triangles.push( triangle );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < subTrees.length; i ++ ) {\n\n\t\t\t\tvar len = subTrees[ i ].triangles.length;\n\n\t\t\t\tif ( len > 8 && level < 16 ) {\n\n\t\t\t\t\tsubTrees[ i ].split( level + 1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( len != 0 ) {\n\n\t\t\t\t\tthis.subTrees.push( subTrees[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tbuild: function () {\n\n\t\t\tthis.calcBox();\n\t\t\tthis.split( 0 );\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tgetRayTriangles: function ( ray, triangles ) {\n\n\t\t\tfor ( var i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\t\tvar subTree = this.subTrees[ i ];\n\t\t\t\tif ( ! ray.intersectsBox( subTree.box ) ) continue;\n\n\t\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\t\tfor ( var j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsubTree.getRayTriangles( ray, triangles );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn triangles;\n\n\t\t},\n\n\t\ttriangleCapsuleIntersect: function ( capsule, triangle ) {\n\n\t\t\tvar point1, point2, line1, line2;\n\n\t\t\ttriangle.getPlane( _plane );\n\n\t\t\tvar d1 = _plane.distanceToPoint( capsule.start ) - capsule.radius;\n\t\t\tvar d2 = _plane.distanceToPoint( capsule.end ) - capsule.radius;\n\n\t\t\tif ( ( d1 > 0 && d2 > 0 ) || ( d1 < - capsule.radius && d2 < - capsule.radius ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\tvar delta = Math.abs( d1 / ( Math.abs( d1 ) + Math.abs( d2 ) ) );\n\t\t\tvar intersectPoint = _v1.copy( capsule.start ).lerp( capsule.end, delta );\n\n\t\t\tif ( triangle.containsPoint( intersectPoint ) ) {\n\n\t\t\t\treturn { normal: _plane.normal.clone(), point: intersectPoint.clone(), depth: Math.abs( Math.min( d1, d2 ) ) };\n\n\t\t\t}\n\n\t\t\tvar r2 = capsule.radius * capsule.radius;\n\n\t\t\tline1 = _line1.set( capsule.start, capsule.end );\n\n\t\t\tvar lines = [\n\t\t\t\t[ triangle.a, triangle.b ],\n\t\t\t\t[ triangle.b, triangle.c ],\n\t\t\t\t[ triangle.c, triangle.a ]\n\t\t\t];\n\n\t\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\t\tline2 = _line2.set( lines[ i ][ 0 ], lines[ i ][ 1 ] );\n\n\t\t\t\t[ point1, point2 ] = capsule.lineLineMinimumPoints( line1, line2 );\n\n\t\t\t\tif ( point1.distanceToSquared( point2 ) < r2 ) {\n\n\t\t\t\t\treturn { normal: point1.clone().sub( point2 ).normalize(), point: point2.clone(), depth: capsule.radius - point1.distanceTo( point2 ) };\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\ttriangleSphereIntersect: function ( sphere, triangle ) {\n\n\t\t\ttriangle.getPlane( _plane );\n\n\t\t\tif ( ! sphere.intersectsPlane( _plane ) ) return false;\n\n\t\t\tvar depth = Math.abs( _plane.distanceToSphere( sphere ) );\n\t\t\tvar r2 = sphere.radius * sphere.radius - depth * depth;\n\n\t\t\tvar plainPoint = _plane.projectPoint( sphere.center, _v1 );\n\n\t\t\tif ( triangle.containsPoint( sphere.center ) ) {\n\n\t\t\t\treturn { normal: _plane.normal.clone(), point: plainPoint.clone(), depth: Math.abs( _plane.distanceToSphere( sphere ) ) };\n\n\t\t\t}\n\n\t\t\tvar lines = [\n\t\t\t\t[ triangle.a, triangle.b ],\n\t\t\t\t[ triangle.b, triangle.c ],\n\t\t\t\t[ triangle.c, triangle.a ]\n\t\t\t];\n\n\t\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\t\t_line1.set( lines[ i ][ 0 ], lines[ i ][ 1 ] );\n\t\t\t\t_line1.closestPointToPoint( plainPoint, true, _v2 );\n\n\t\t\t\tvar d = _v2.distanceToSquared( sphere.center );\n\n\t\t\t\tif ( d < r2 ) {\n\n\t\t\t\t\treturn { normal: sphere.center.clone().sub( _v2 ).normalize(), point: _v2.clone(), depth: sphere.radius - Math.sqrt( d ) };\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tgetSphereTriangles: function ( sphere, triangles ) {\n\n\t\t\tfor ( var i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\t\tvar subTree = this.subTrees[ i ];\n\n\t\t\t\tif ( ! sphere.intersectsBox( subTree.box ) ) continue;\n\n\t\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\t\tfor ( var j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsubTree.getSphereTriangles( sphere, triangles );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tgetCapsuleTriangles: function ( capsule, triangles ) {\n\n\t\t\tfor ( var i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\t\tvar subTree = this.subTrees[ i ];\n\n\t\t\t\tif ( ! capsule.intersectsBox( subTree.box ) ) continue;\n\n\t\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\t\tfor ( var j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsubTree.getCapsuleTriangles( capsule, triangles );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsphereIntersect( sphere ) {\n\n\t\t\t_sphere.copy( sphere );\n\n\t\t\tvar triangles = [], result, hit = false;\n\n\t\t\tthis.getSphereTriangles( sphere, triangles );\n\n\t\t\tfor ( var i = 0; i < triangles.length; i ++ ) {\n\n\t\t\t\tif ( result = this.triangleSphereIntersect( _sphere, triangles[ i ] ) ) {\n\n\t\t\t\t\thit = true;\n\n\t\t\t\t\t_sphere.center.add( result.normal.multiplyScalar( result.depth ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hit ) {\n\n\t\t\t\tvar collisionVector = _sphere.center.clone().sub( sphere.center );\n\t\t\t\tvar depth = collisionVector.length();\n\n\t\t\t\treturn { normal: collisionVector.normalize(), depth: depth };\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\tcapsuleIntersect: function ( capsule ) {\n\n\t\t\t_capsule.copy( capsule );\n\n\t\t\tvar triangles = [], result, hit = false;\n\n\t\t\tthis.getCapsuleTriangles( _capsule, triangles );\n\n\t\t\tfor ( var i = 0; i < triangles.length; i ++ ) {\n\n\t\t\t\tif ( result = this.triangleCapsuleIntersect( _capsule, triangles[ i ] ) ) {\n\n\t\t\t\t\thit = true;\n\n\t\t\t\t\t_capsule.translate( result.normal.multiplyScalar( result.depth ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hit ) {\n\n\t\t\t\tvar collisionVector = _capsule.getCenter( new Vector3() ).sub( capsule.getCenter( _v1 ) );\n\t\t\t\tvar depth = collisionVector.length();\n\n\t\t\t\treturn { normal: collisionVector.normalize(), depth: depth };\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t},\n\n\t\trayIntersect: function ( ray ) {\n\n\t\t\tif ( ray.direction.length() === 0 ) return;\n\n\t\t\tvar triangles = [], triangle, position,\n\t\t\t\tdistance = 1e100,\n\t\t\t\tresult;\n\n\t\t\tthis.getRayTriangles( ray, triangles );\n\n\t\t\tfor ( var i = 0; i < triangles.length; i ++ ) {\n\n\t\t\t\tresult = ray.intersectTriangle( triangles[ i ].a, triangles[ i ].b, triangles[ i ].c, true, _v1 );\n\n\t\t\t\tif ( result ) {\n\n\t\t\t\t\tvar newdistance = result.sub( ray.origin ).length();\n\n\t\t\t\t\tif ( distance > newdistance ) {\n\n\t\t\t\t\t\tposition = result.clone().add( ray.origin );\n\t\t\t\t\t\tdistance = newdistance;\n\t\t\t\t\t\ttriangle = triangles[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn distance < 1e100 ? { distance: distance, triangle: triangle, position: position } : false;\n\n\t\t},\n\n\t\tfromGraphNode: function ( group ) {\n\n\t\t\tgroup.traverse( ( obj ) => {\n\n\t\t\t\tif ( obj.type === 'Mesh' ) {\n\n\t\t\t\t\tobj.updateMatrix();\n\t\t\t\t\tobj.updateWorldMatrix();\n\n\t\t\t\t\tvar geometry, isTemp = false;\n\n\t\t\t\t\tif ( obj.geometry.index ) {\n\n\t\t\t\t\t\tisTemp = true;\n\t\t\t\t\t\tgeometry = obj.geometry.clone().toNonIndexed();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgeometry = obj.geometry;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar positions = geometry.attributes.position.array;\n\t\t\t\t\tvar transform = obj.matrixWorld;\n\n\t\t\t\t\tfor ( var i = 0; i < positions.length; i += 9 ) {\n\n\t\t\t\t\t\tvar v1 = new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\t\t\t\t\t\tvar v2 = new Vector3( positions[ i + 3 ], positions[ i + 4 ], positions[ i + 5 ] );\n\t\t\t\t\t\tvar v3 = new Vector3( positions[ i + 6 ], positions[ i + 7 ], positions[ i + 8 ] );\n\n\t\t\t\t\t\tv1.applyMatrix4( transform );\n\t\t\t\t\t\tv2.applyMatrix4( transform );\n\t\t\t\t\t\tv3.applyMatrix4( transform );\n\n\t\t\t\t\t\tthis.addTriangle( new Triangle( v1, v2, v3 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( isTemp ) {\n\n\t\t\t\t\t\tgeometry.dispose();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tthis.build();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t} );\n\n\treturn Octree;\n\n} )();\n\nexport { Octree };\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tCanvasTexture,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternionKeyframeTrack,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from '../../../build/three.module.js';\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ddsLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function ( ddsLoader ) {\n\n\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetKTX2Loader: function ( ktx2Loader ) {\n\n\t\t\tthis.ktx2Loader = ktx2Loader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetMeshoptDecoder: function ( meshoptDecoder ) {\n\n\t\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\t\t\tvar plugins = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager,\n\t\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t\t} );\n\n\t\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\t\tfor ( var i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\t\tvar plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t\t// Remove this workaround if we move all the existing\n\t\t\t\t// extension handlers to plugin system\n\t\t\t\textensions[ plugin.name ] = true;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureDDSExtension( this.ddsLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.setExtensions( extensions );\n\t\t\tparser.setPlugins( plugins );\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\t\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension( ddsLoader ) {\n\n\t\tif ( ! ddsLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = ddsLoader;\n\n\t}\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\tGLTFLightsExtension.prototype._markDefs = function () {\n\n\t\tvar parser = this.parser;\n\t\tvar nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tGLTFLightsExtension.prototype._loadLight = function ( lightIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar cacheKey = 'light:' + lightIndex;\n\t\tvar dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tvar json = parser.json;\n\t\tvar extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tvar lightDefs = extensions.lights || [];\n\t\tvar lightDef = lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t};\n\n\tGLTFLightsExtension.prototype.createNodeAttachment = function ( nodeIndex ) {\n\n\t\tvar self = this;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\t\tvar lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tvar lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\tfunction GLTFMaterialsClearcoatExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsClearcoatExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Transmission Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n\t * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n\t */\n\tfunction GLTFMaterialsTransmissionExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tGLTFMaterialsTransmissionExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsTransmissionExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * BasisU Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n\t */\n\tfunction GLTFTextureBasisUExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tGLTFTextureBasisUExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ this.name ];\n\t\tvar source = json.images[ extension.source ];\n\t\tvar loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\t/**\n\t * WebP Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n\t */\n\tfunction GLTFTextureWebPExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tGLTFTextureWebPExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar name = this.name;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ name ];\n\t\tvar source = json.images[ extension.source ];\n\t\tvar loader = source.uri ? parser.options.manager.getHandler( source.uri ) : parser.textureLoader;\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t};\n\n\tGLTFTextureWebPExtension.prototype.detectSupport = function () {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tvar image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t};\n\n\t/**\n\t* meshopt BufferView Compression Extension\n\t*\n\t* Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n\t*/\n\tfunction GLTFMeshoptCompression( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tGLTFMeshoptCompression.prototype.loadBufferView = function ( index ) {\n\n\t\tvar json = this.parser.json;\n\t\tvar bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tvar extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tvar buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tvar decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tvar byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tvar byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tvar count = extensionDef.count;\n\t\t\t\tvar stride = extensionDef.byteStride;\n\n\t\t\t\tvar result = new ArrayBuffer( count * stride );\n\t\t\t\tvar source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.setExtensions = function ( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t};\n\n\tGLTFParser.prototype.setPlugins = function ( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t};\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( [\n\n\t\t\tthis.getDependencies( 'scene' ),\n\t\t\tthis.getDependencies( 'animation' ),\n\t\t\tthis.getDependencies( 'camera' ),\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tonLoad( result );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype._markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\tGLTFParser.prototype._addNodeRef = function ( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t};\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\tGLTFParser.prototype._getNodeRef = function ( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tvar ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t};\n\n\tGLTFParser.prototype._invokeOne = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t};\n\n\tGLTFParser.prototype._invokeAll = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar loader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tloader = options.manager.getHandler( source.uri );\n\n\t\t}\n\n\t\tif ( ! loader ) {\n\n\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t: this.textureLoader;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\tGLTFParser.prototype.loadTextureImage = function ( textureIndex, source, loader ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar URL = self.URL || self.webkitURL;\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\t\tvar hasAlpha = true;\n\n\t\tif ( source.mimeType === 'image/jpeg' ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n\t\t\t\t\t// alpha channel. This check is conservative — the image could have an alpha\n\t\t\t\t\t// channel with all values == 1, and the indexed type (colorType == 3) only\n\t\t\t\t\t// sometimes contains alpha.\n\t\t\t\t\t//\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\tvar colorType = new DataView( bufferView, 25, 1 ).getUint8( 0, false );\n\t\t\t\t\thasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tvar onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tresolve( new CanvasTexture( imageBitmap ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = RGBFormat;\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tvar gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexTangents ) cachedMaterial.vertexTangents = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\tif ( material.normalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.clearcoatNormalScale.y = - material.clearcoatNormalScale.y;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\tGLTFParser.prototype.getMaterialType = function ( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tGLTFParser.prototype.createUniqueName = function ( originalName ) {\n\n\t\tvar sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tvar name = sanitizedName;\n\n\t\tfor ( var i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar maxDisplacement = new Vector3();\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\tbox.expandByVector( maxDisplacement );\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tvar nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\nexport { GLTFLoader };\n","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFileLoader,\n\tLoader\n} from '../../../build/three.module.js';\n\nvar DRACOLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.decoderPath = '';\n\tthis.decoderConfig = {};\n\tthis.decoderBinary = null;\n\tthis.decoderPending = null;\n\n\tthis.workerLimit = 4;\n\tthis.workerPool = [];\n\tthis.workerNextTaskID = 1;\n\tthis.workerSourceURL = '';\n\n\tthis.defaultAttributeIDs = {\n\t\tposition: 'POSITION',\n\t\tnormal: 'NORMAL',\n\t\tcolor: 'COLOR',\n\t\tuv: 'TEX_COORD'\n\t};\n\tthis.defaultAttributeTypes = {\n\t\tposition: 'Float32Array',\n\t\tnormal: 'Float32Array',\n\t\tcolor: 'Float32Array',\n\t\tuv: 'Float32Array'\n\t};\n\n};\n\nDRACOLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DRACOLoader,\n\n\tsetDecoderPath: function ( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t},\n\n\tsetDecoderConfig: function ( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t},\n\n\tsetWorkerLimit: function ( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t},\n\n\t/** @deprecated */\n\tsetVerbosity: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setVerbosity() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetDrawMode: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setDrawMode() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetSkipDequantization: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setSkipDequantization() method has been removed.' );\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tvar taskConfig = {\n\t\t\t\tattributeIDs: this.defaultAttributeIDs,\n\t\t\t\tattributeTypes: this.defaultAttributeTypes,\n\t\t\t\tuseUniqueIDs: false\n\t\t\t};\n\n\t\t\tthis.decodeGeometry( buffer, taskConfig )\n\t\t\t\t.then( onLoad )\n\t\t\t\t.catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\tdecodeDracoFile: function ( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tvar taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\tthis.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t},\n\n\tdecodeGeometry: function ( buffer, taskConfig ) {\n\n\t\t// TODO: For backward-compatibility, support 'attributeTypes' objects containing\n\t\t// references (rather than names) to typed array constructors. These must be\n\t\t// serialized before sending them to the worker.\n\t\tfor ( var attribute in taskConfig.attributeTypes ) {\n\n\t\t\tvar type = taskConfig.attributeTypes[ attribute ];\n\n\t\t\tif ( type.BYTES_PER_ELEMENT !== undefined ) {\n\n\t\t\t\ttaskConfig.attributeTypes[ attribute ] = type.name;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( DRACOLoader.taskCache.has( buffer ) ) {\n\n\t\t\tvar cachedTask = DRACOLoader.taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar worker;\n\t\tvar taskID = this.workerNextTaskID ++;\n\t\tvar taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tvar geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\tDRACOLoader.taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t},\n\n\t_createGeometry: function ( geometryData ) {\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tvar attribute = geometryData.attributes[ i ];\n\t\t\tvar name = attribute.name;\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\t_loadLibrary: function ( url, responseType ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t},\n\n\tpreload: function () {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t},\n\n\t_initDecoder: function () {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tvar useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tvar librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tvar jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tvar fn = DRACOLoader.DRACOWorker.toString();\n\n\t\t\t\tvar body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t},\n\n\t_getWorker: function ( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tvar worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tvar message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t},\n\n\t_releaseTask: function ( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t},\n\n\tdebug: function () {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t},\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/* WEB WORKER */\n\nDRACOLoader.DRACOWorker = function () {\n\n\tvar decoderConfig;\n\tvar decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tvar message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tvar buffer = message.buffer;\n\t\t\t\tvar taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tvar draco = module.draco;\n\t\t\t\t\tvar decoder = new draco.Decoder();\n\t\t\t\t\tvar decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tvar buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tvar attributeIDs = taskConfig.attributeIDs;\n\t\tvar attributeTypes = taskConfig.attributeTypes;\n\n\t\tvar dracoGeometry;\n\t\tvar decodingStatus;\n\n\t\tvar geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tvar geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( var attributeName in attributeIDs ) {\n\n\t\t\tvar attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tvar attribute;\n\t\t\tvar attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tvar numFaces = dracoGeometry.num_faces();\n\t\tvar numIndices = numFaces * 3;\n\t\tvar byteLength = numIndices * 4;\n\n\t\tvar ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tvar index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tvar numComponents = attribute.num_components();\n\t\tvar numPoints = dracoGeometry.num_points();\n\t\tvar numValues = numPoints * numComponents;\n\t\tvar byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tvar dataType = getDracoDataType( draco, attributeType );\n\n\t\tvar ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tvar array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n};\n\nDRACOLoader.taskCache = new WeakMap();\n\n/** Deprecated static methods */\n\n/** @deprecated */\nDRACOLoader.setDecoderPath = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.setDecoderConfig = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.releaseDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.getDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\nexport { DRACOLoader };\n","// This file is part of meshoptimizer library and is distributed under the terms of MIT License.\n// Copyright (C) 2016-2020, by Arseny Kapoulkine (arseny.kapoulkine@gmail.com)\nvar MeshoptDecoder = (function() {\n\t\"use strict\";\n\n\t// Built with clang version 11.0.0 (https://github.com/llvm/llvm-project.git 0160ad802e899c2922bc9b29564080c22eb0908c)\n\t// Built from meshoptimizer 0.14\n\tvar wasm_base = \"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\";\n\tvar wasm_simd = \"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\";\n\n\t// Uses bulk-memory and simd extensions\n\tvar detector = new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);\n\n\t// Used to unpack wasm\n\tvar wasmpack = new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);\n\n\tif (typeof WebAssembly !== 'object') {\n\t\t// This module requires WebAssembly to function\n\t\treturn {\n\t\t\tsupported: false,\n\t\t};\n\t}\n\n\tvar wasm = wasm_base;\n\n\tif (WebAssembly.validate(detector)) {\n\t\twasm = wasm_simd;\n\t\tconsole.log(\"Warning: meshopt_decoder is using experimental SIMD support\");\n\t}\n\n\tvar instance;\n\n\tvar promise =\n\t\tWebAssembly.instantiate(unpack(wasm), {})\n\t\t.then(function(result) {\n\t\t\tinstance = result.instance;\n\t\t\tinstance.exports.__wasm_call_ctors();\n\t\t});\n\n\tfunction unpack(data) {\n\t\tvar result = new Uint8Array(data.length);\n\t\tfor (var i = 0; i < data.length; ++i) {\n\t\t\tvar ch = data.charCodeAt(i);\n\t\t\tresult[i] = ch > 96 ? ch - 71 : ch > 64 ? ch - 65 : ch > 47 ? ch + 4 : ch > 46 ? 63 : 62;\n\t\t}\n\t\tvar write = 0;\n\t\tfor (var i = 0; i < data.length; ++i) {\n\t\t\tresult[write++] = (result[i] < 60) ? wasmpack[result[i]] : (result[i] - 60) * 64 + result[++i];\n\t\t}\n\t\treturn result.buffer.slice(0, write);\n\t}\n\n\tfunction decode(fun, target, count, size, source, filter) {\n\t\tvar sbrk = instance.exports.sbrk;\n\t\tvar count4 = (count + 3) & ~3; // pad for SIMD filter\n\t\tvar tp = sbrk(count4 * size);\n\t\tvar sp = sbrk(source.length);\n\t\tvar heap = new Uint8Array(instance.exports.memory.buffer);\n\t\theap.set(source, sp);\n\t\tvar res = fun(tp, count, size, sp, source.length);\n\t\tif (res == 0 && filter) {\n\t\t\tfilter(tp, count4, size);\n\t\t}\n\t\ttarget.set(heap.subarray(tp, tp + count * size));\n\t\tsbrk(tp - sbrk(0));\n\t\tif (res != 0) {\n\t\t\tthrow new Error(\"Malformed buffer data: \" + res);\n\t\t}\n\t};\n\n\tvar filters = {\n\t\t// legacy index-based enums for glTF\n\t\t0: \"\",\n\t\t1: \"meshopt_decodeFilterOct\",\n\t\t2: \"meshopt_decodeFilterQuat\",\n\t\t3: \"meshopt_decodeFilterExp\",\n\t\t// string-based enums for glTF\n\t\tNONE: \"\",\n\t\tOCTAHEDRAL: \"meshopt_decodeFilterOct\",\n\t\tQUATERNION: \"meshopt_decodeFilterQuat\",\n\t\tEXPONENTIAL: \"meshopt_decodeFilterExp\",\n\t};\n\n\tvar decoders = {\n\t\t// legacy index-based enums for glTF\n\t\t0: \"meshopt_decodeVertexBuffer\",\n\t\t1: \"meshopt_decodeIndexBuffer\",\n\t\t2: \"meshopt_decodeIndexSequence\",\n\t\t// string-based enums for glTF\n\t\tATTRIBUTES: \"meshopt_decodeVertexBuffer\",\n\t\tTRIANGLES: \"meshopt_decodeIndexBuffer\",\n\t\tINDICES: \"meshopt_decodeIndexSequence\",\n\t};\n\n\treturn {\n\t\tready: promise,\n\t\tsupported: true,\n\t\tdecodeVertexBuffer: function(target, count, size, source, filter) {\n\t\t\tdecode(instance.exports.meshopt_decodeVertexBuffer, target, count, size, source, instance.exports[filters[filter]]);\n\t\t},\n\t\tdecodeIndexBuffer: function(target, count, size, source) {\n\t\t\tdecode(instance.exports.meshopt_decodeIndexBuffer, target, count, size, source);\n\t\t},\n\t\tdecodeIndexSequence: function(target, count, size, source) {\n\t\t\tdecode(instance.exports.meshopt_decodeIndexSequence, target, count, size, source);\n\t\t},\n\t\tdecodeGltfBuffer: function(target, count, size, source, mode, filter) {\n\t\t\tdecode(instance.exports[decoders[mode]], target, count, size, source, instance.exports[filters[filter]]);\n\t\t}\n\t};\n})();\n\nexport { MeshoptDecoder };\n","import { useLoader } from 'react-three-fiber';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\nimport { MeshoptDecoder } from 'three/examples/jsm/libs/meshopt_decoder.module.js';\n\nfunction extensions(useDraco, useMeshopt) {\n  return loader => {\n    if (useDraco) {\n      const dracoLoader = new DRACOLoader();\n      dracoLoader.setDecoderPath(typeof useDraco === 'string' ? useDraco : 'https://www.gstatic.com/draco/v1/decoders/');\n      loader.setDRACOLoader(dracoLoader);\n    }\n\n    if (useMeshopt) {\n      loader.setMeshoptDecoder(MeshoptDecoder);\n    }\n  };\n}\n\nfunction useGLTF(path, useDraco = true, useMeshOpt = true) {\n  const gltf = useLoader(GLTFLoader, path, extensions(useDraco, useMeshOpt));\n  return gltf;\n}\n\nuseGLTF.preload = (path, useDraco = true, useMeshOpt = true) => useLoader.preload(GLTFLoader, path, extensions(useDraco, useMeshOpt));\n\nexport { useGLTF };\n","import {\n\tEuler,\n\tEventDispatcher,\n\tVector3\n} from '../../../build/three.module.js';\n\nvar PointerLockControls = function ( camera, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document.body;\n\n\t}\n\n\tthis.domElement = domElement;\n\tthis.isLocked = false;\n\n\t// Set to constrain the pitch of the camera\n\t// Range is 0 to Math.PI radians\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar lockEvent = { type: 'lock' };\n\tvar unlockEvent = { type: 'unlock' };\n\n\tvar euler = new Euler( 0, 0, 0, 'YXZ' );\n\n\tvar PI_2 = Math.PI / 2;\n\n\tvar vec = new Vector3();\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.isLocked === false ) return;\n\n\t\tvar movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n\t\tvar movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n\t\teuler.setFromQuaternion( camera.quaternion );\n\n\t\teuler.y -= movementX * 0.002;\n\t\teuler.x -= movementY * 0.002;\n\n\t\teuler.x = Math.max( PI_2 - scope.maxPolarAngle, Math.min( PI_2 - scope.minPolarAngle, euler.x ) );\n\n\t\tcamera.quaternion.setFromEuler( euler );\n\n\t\tscope.dispatchEvent( changeEvent );\n\n\t}\n\n\tfunction onPointerlockChange() {\n\n\t\tif ( scope.domElement.ownerDocument.pointerLockElement === scope.domElement ) {\n\n\t\t\tscope.dispatchEvent( lockEvent );\n\n\t\t\tscope.isLocked = true;\n\n\t\t} else {\n\n\t\t\tscope.dispatchEvent( unlockEvent );\n\n\t\t\tscope.isLocked = false;\n\n\t\t}\n\n\t}\n\n\tfunction onPointerlockError() {\n\n\t\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\n\n\t}\n\n\tthis.connect = function () {\n\n\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockchange', onPointerlockChange, false );\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockerror', onPointerlockError, false );\n\n\t};\n\n\tthis.disconnect = function () {\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockchange', onPointerlockChange, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockerror', onPointerlockError, false );\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tthis.disconnect();\n\n\t};\n\n\tthis.getObject = function () { // retaining this method for backward compatibility\n\n\t\treturn camera;\n\n\t};\n\n\tthis.getDirection = function () {\n\n\t\tvar direction = new Vector3( 0, 0, - 1 );\n\n\t\treturn function ( v ) {\n\n\t\t\treturn v.copy( direction ).applyQuaternion( camera.quaternion );\n\n\t\t};\n\n\t}();\n\n\tthis.moveForward = function ( distance ) {\n\n\t\t// move forward parallel to the xz-plane\n\t\t// assumes camera.up is y-up\n\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tvec.crossVectors( camera.up, vec );\n\n\t\tcamera.position.addScaledVector( vec, distance );\n\n\t};\n\n\tthis.moveRight = function ( distance ) {\n\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\n\n\t\tcamera.position.addScaledVector( vec, distance );\n\n\t};\n\n\tthis.lock = function () {\n\n\t\tthis.domElement.requestPointerLock();\n\n\t};\n\n\tthis.unlock = function () {\n\n\t\tscope.domElement.ownerDocument.exitPointerLock();\n\n\t};\n\n\tthis.connect();\n\n};\n\nPointerLockControls.prototype = Object.create( EventDispatcher.prototype );\nPointerLockControls.prototype.constructor = PointerLockControls;\n\nexport { PointerLockControls };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { forwardRef, useEffect, createElement } from 'react';\nimport { useThree } from 'react-three-fiber';\nimport useEffectfulState from '../helpers/useEffectfulState.js';\nimport { PointerLockControls as PointerLockControls$1 } from 'three/examples/jsm/controls/PointerLockControls';\n\nconst PointerLockControls = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    selector\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"selector\"]);\n\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  const controls = useEffectfulState(() => new PointerLockControls$1(camera, gl.domElement), [camera, gl.domElement], ref);\n  useEffect(() => {\n    controls == null ? void 0 : controls.addEventListener == null ? void 0 : controls.addEventListener('change', invalidate);\n    return () => controls == null ? void 0 : controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', invalidate);\n  }, [controls, invalidate]);\n  useEffect(() => {\n    const handler = () => controls == null ? void 0 : controls.lock();\n\n    const element = selector ? document.querySelector(selector) : document;\n    element && element.addEventListener('click', handler);\n    return () => element ? element.removeEventListener('click', handler) : undefined;\n  }, [controls, selector]);\n  return controls ? /*#__PURE__*/createElement(\"primitive\", _extends({\n    dispose: undefined,\n    object: controls\n  }, props)) : null;\n});\n\nexport { PointerLockControls };\n"],"sourceRoot":""}